<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Admin - Mailouts - Luxe</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style type="text/tailwindcss">
        body {
            @apply bg-gradient-to-br from-slate-900 to-slate-800 text-gray-200 font-sans min-h-screen p-4;
        }
        .container {
            @apply bg-slate-800 bg-opacity-50 backdrop-blur-md shadow-2xl rounded-xl p-6 md:p-8 w-full max-w-7xl mx-auto;
        }
        h1 {
            @apply text-4xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-purple-400 via-pink-500 to-red-500 mb-8;
        }
        .table-custom {
            @apply min-w-full bg-slate-700 bg-opacity-50 shadow-xl rounded-lg overflow-hidden;
        }
        .table-custom th {
            @apply bg-slate-600 bg-opacity-70 text-slate-100 uppercase text-sm tracking-wider py-4 px-6 text-left;
        }
        .table-custom td {
            @apply text-slate-300 text-sm py-4 px-6 border-b border-slate-600 transition-colors duration-200 hover:bg-slate-600 hover:bg-opacity-30;
        }
        .table-custom tr:last-child td {
            @apply border-b-0;
        }
        .link-button {
            @apply inline-block text-white font-semibold py-2 px-5 rounded-lg shadow-md hover:shadow-lg transition-all duration-300 ease-in-out transform hover:-translate-y-0.5 hover:scale-105;
        }
        .action-link {
            @apply font-medium mr-3 transition-colors duration-200;
        }
        .view-link { @apply text-sky-400 hover:text-sky-300; }
        .edit-link { @apply text-amber-400 hover:text-amber-300; }
        .delete-link { @apply text-red-500 hover:text-red-400; }
        .badge {
            @apply inline-block text-xs px-3 py-1 rounded-full uppercase font-semibold tracking-wide transition-transform duration-200 hover:scale-110;
        }
        .tag-badge { @apply bg-blue-500 bg-opacity-70 text-blue-100; }
        .phone-code-badge { @apply bg-green-500 bg-opacity-70 text-green-100; }
    </style>
</head>
<body>
    <div class="container">
        <h1 class="mb-10">Mailout Operations</h1>
        <div class="mb-8 flex flex-wrap justify-between items-center gap-4">
            <a href="/admin/" class="link-button bg-slate-600 hover:bg-slate-500">
                &larr; Back to Dashboard
            </a>
            <a href="/admin/mailouts/create" class="link-button bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700">
                âœ¨ Create New Mailout
            </a>
        </div>

        <div class="overflow-x-auto rounded-lg shadow-xl">
            <table class="table-custom">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Text Message</th>
                        <th>Start At</th>
                        <th>Finish At</th>
                        <th>Tags</th>
                        <th>Phone Codes</th>
                        <th>Local Start</th>
                        <th>Local End</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    {% for mailout in mailouts %}
                    <tr class="hover:bg-slate-700 transition-colors duration-150">
                        <td class="font-mono">{{ mailout.id }}</td>
                        <td class="max-w-xs truncate" title="{{ mailout.text_message }}">{{ mailout.text_message }}</td>
                        <td>{{ mailout.start_at.strftime('%Y-%m-%d %H:%M') if mailout.start_at else '--' }}</td>
                        <td>{{ mailout.finish_at.strftime('%Y-%m-%d %H:%M') if mailout.finish_at else '--' }}</td>
                        <td>
                            {% if mailout.tags %}
                                {% for tag in mailout.tags %}
                                <span class="badge tag-badge mr-1 mb-1">{{ tag.tag }}</span>
                                {% endfor %}
                            {% else %}
                                <span class="text-slate-500 italic">None</span>
                            {% endif %}
                        </td>
                        <td>
                            {% if mailout.phone_codes %}
                                {% for pc in mailout.phone_codes %}
                                <span class="badge phone-code-badge mr-1 mb-1">{{ pc.phone_code }}</span>
                                {% endfor %}
                            {% else %}
                                <span class="text-slate-500 italic">None</span>
                            {% endif %}
                        </td>
                        <td class="text-center">{{ mailout.local_time_start_hour if mailout.local_time_start_hour is not none else 'N/A' }}</td>
                        <td class="text-center">{{ mailout.local_time_end_hour if mailout.local_time_end_hour is not none else 'N/A' }}</td>
                        <td class="whitespace-nowrap">
                            <a href="/admin/mailouts/{{ mailout.id }}" class="action-link view-link">View</a>
                            <a href="/admin/mailouts/{{ mailout.id }}/edit" class="action-link edit-link">Edit</a>
                            <a href="/admin/mailouts/{{ mailout.id }}/delete" class="action-link delete-link">Delete</a>
                        </td>
                    </tr>
                    {% else %}
                    <tr>
                        <td colspan="9" class="text-center py-8 text-slate-400 italic">No mailouts found. Create one perhaps?</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</body>
</html> 